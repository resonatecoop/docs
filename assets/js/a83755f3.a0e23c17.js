"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[128],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6329:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return c}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),l=["components"],i={sidebar_position:1,title:"Stream"},s=void 0,p={unversionedId:"basics/stream",id:"basics/stream",title:"Stream",description:"Explore the monorepo for the web player, the stream repository...",source:"@site/docs/basics/stream.md",sourceDirName:"basics",slug:"/basics/stream",permalink:"/docs/basics/stream",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Stream"},sidebar:"tutorialSidebar",previous:{title:"Tutorial - Basics",permalink:"/docs/category/tutorial---basics"},next:{title:"Website",permalink:"/docs/basics/website"}},u={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Quickstart",id:"quickstart",level:3},{value:"Testing on Mobile: Using HTTPS",id:"testing-on-mobile-using-https",level:3},{value:"Nginx",id:"nginx",level:4},{value:"Generating a Custom Certificate",id:"generating-a-custom-certificate",level:4},{value:"Update your Hosts file",id:"update-your-hosts-file",level:4},{value:"Update on your .env file",id:"update-on-your-env-file",level:4},{value:"Run the app!",id:"run-the-app",level:4},{value:"Development",id:"development",level:2},{value:"API",id:"api",level:3},{value:"Other Commands",id:"other-commands",level:3},{value:"Add a package",id:"add-a-package",level:3},{value:"Add a dev dependency",id:"add-a-dev-dependency",level:3},{value:"Build",id:"build",level:3},{value:"Testing",id:"testing",level:2},{value:"Commands",id:"commands",level:2},{value:"Code style",id:"code-style",level:2},{value:"Maintainers",id:"maintainers",level:2},{value:"See Also",id:"see-also",level:2}],d={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Explore the monorepo for the web player, the ",(0,o.kt)("code",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/resonatecoop/stream"},"stream"))," repository..."),(0,o.kt)("div",{align:"center"},(0,o.kt)("h1",{align:"center"}),(0,o.kt)("strong",null,"Play fair.")),(0,o.kt)("br",null),(0,o.kt)("div",{align:"center"},(0,o.kt)("h3",null,(0,o.kt)("a",{href:"https://resonate.is"},"Website"),(0,o.kt)("span",null," | "),(0,o.kt)("a",{href:"https://www.twitter.com/resonatecoop/"},"Twitter"),(0,o.kt)("span",null," | "),(0,o.kt)("a",{href:"https://github.com/resonatecoop/stream2own/blob/master/CONTRIBUTING.md"},"Contributing"),(0,o.kt)("span",null," | "),(0,o.kt)("a",{href:"https://community.resonate.is/t/dev-volunteers-needed-to-build-the-resonate-ecosystem/2262"},"Developer Guide"),(0,o.kt)("span",null," | "),(0,o.kt)("a",{href:"https://docs.resonate.coop"},"Resonate Docs"))),(0,o.kt)("br",null),(0,o.kt)("div",{align:"center"},(0,o.kt)("a",{href:"https://standardjs.com"},(0,o.kt)("img",{src:"https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square",alt:"Standard"}))),(0,o.kt)("p",null,"Resonate is an open-source music streaming service run by a cooperative of artists and software developers."),(0,o.kt)("p",null,"If you want to know what we're building or want to get more involved, head over to the Platform category on our ",(0,o.kt)("a",{parentName:"p",href:"https://community.resonate.is/c/platform/l/latest?board=default"},"forum")," or read the ",(0,o.kt)("a",{parentName:"p",href:"https://community.resonate.is/t/dev-volunteers-needed-to-build-the-resonate-ecosystem/2262"},"Developer Guide")," in our ",(0,o.kt)("a",{parentName:"p",href:"https://community.resonate.is/docs"},"Resonate Handbook"),"."),(0,o.kt)("p",null,"If you're looking for a good first task, feel encouraged to take on an un-assigned ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/resonatecoop/stream/issues"},"'help wanted' issues"),"."),(0,o.kt)("p",null,"Are you building something using the Resonate ",(0,o.kt)("a",{parentName:"p",href:"#api"},"API")," and would like to request a change? Resonate welcomes #proposals in the ",(0,o.kt)("a",{parentName:"p",href:"https://community.resonate.is/c/66"},"Co-Operation section of the forum"),"."),(0,o.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#development"},"Development")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#api"},"API")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#testing"},"Testing")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#commands"},"Commands")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#code-style"},"Code style")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#contributors"},"Contributors")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#see-also"},"See Also"))),(0,o.kt)("h2",{id:"getting-started"},"Getting Started"),(0,o.kt)("h3",{id:"quickstart"},"Quickstart"),(0,o.kt)("p",null,"Quick-n-dirty instructions to get the player up and running on your computer using http and pointing to the existing production API (see ",(0,o.kt)("a",{parentName:"p",href:"#api"},"API")," to learn more about the API).\nAssumes the latest version of ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/"},"node.js"),"."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Stuck? Make an issue on Github! Curious about the roadmap? Ask in the ",(0,o.kt)("a",{parentName:"em",href:"https://community.resonate.is/t/development-team/1724"},"forum")),"."),(0,o.kt)("p",null,"Clone the repo and ",(0,o.kt)("inlineCode",{parentName:"p"},"cd")," into it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"git@github.com:resonatecoop/stream.git\ncd stream\n")),(0,o.kt)("p",null,"Install dependencies:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install\n")),(0,o.kt)("p",null,"Create your env file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cp beta/.env.example beta/.env\n")),(0,o.kt)("p",null,"Run the app:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm run dev\n")),(0,o.kt)("p",null,"You should see the app running at http://localhost:8080."),(0,o.kt)("p",null,"Try logging in at http://localhost:8080/login."),(0,o.kt)("p",null,"You can run the app at a different port using the command below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm run dev -- --port 8089\n")),(0,o.kt)("p",null,"The embed app (optional)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm run dev:embed\n")),(0,o.kt)("h3",{id:"testing-on-mobile-using-https"},"Testing on Mobile: Using HTTPS"),(0,o.kt)("p",null,"HTTPS is required to test PWAs on mobile. ",(0,o.kt)("a",{parentName:"p",href:"https://web.dev/install-criteria/"},"Read more about Progressive Web Apps"),"."),(0,o.kt)("h4",{id:"nginx"},"Nginx"),(0,o.kt)("p",null,"You can find a reference ",(0,o.kt)("a",{parentName:"p",href:"/docs/nginx/beta.resonate.localhost.conf"},"nginx configuration")," file in the docs.\nNote that the reference is not a complete ",(0,o.kt)("inlineCode",{parentName:"p"},"nginx.conf")," file, it should fit within your existing configuration or be wrapped in a http block directive:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"http {\n  server {\n  }\n}\n")),(0,o.kt)("p",null,"In the example ",(0,o.kt)("inlineCode",{parentName:"p"},"nginx.conf"),", note the lines referring to the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssl_certificate_key")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssl_certificate_key"),"."),(0,o.kt)("h4",{id:"generating-a-custom-certificate"},"Generating a Custom Certificate"),(0,o.kt)("p",null,"You can generate a custom certificate using ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/FiloSottile/mkcert"},"mkcert")," for ",(0,o.kt)("inlineCode",{parentName:"p"},"beta.resonate.localhost"),". ",(0,o.kt)("em",{parentName:"p"},"This origin is whitelisted in our CORS config"),"."),(0,o.kt)("p",null,"Generate the certificate (",(0,o.kt)("inlineCode",{parentName:"p"},"cert.pem"),") and key (",(0,o.kt)("inlineCode",{parentName:"p"},"key.pem"),") for ",(0,o.kt)("inlineCode",{parentName:"p"},"beta.resonate.localhost"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"mkcert -key-file key.pem -cert-file cert.pem beta.resonate.localhost\n")),(0,o.kt)("p",null,"In your nginx.conf file, update the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssl_certificate_key")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssl_certificate_key")," to refer to your new key and certificate files."),(0,o.kt)("h4",{id:"update-your-hosts-file"},"Update your Hosts file"),(0,o.kt)("p",null,"Update your hosts file to include:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"127.0.0.1       beta.resonate.localhost\n")),(0,o.kt)("h4",{id:"update-on-your-env-file"},"Update on your .env file"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"APP_DOMAIN=beta.resonate.localhost\nAPP_HOST=https://beta.resonate.localhost\n")),(0,o.kt)("h4",{id:"run-the-app"},"Run the app!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm run dev\n")),(0,o.kt)("p",null,"You should now see the player running on ",(0,o.kt)("a",{parentName:"p",href:"https://beta.resonate.localhost"},"https://beta.resonate.localhost")," or"),(0,o.kt)("h2",{id:"development"},"Development"),(0,o.kt)("h3",{id:"api"},"API"),(0,o.kt)("p",null,"If you want to build on the API for personal use, consider checking the ",(0,o.kt)("a",{parentName:"p",href:"https://community.resonate.is/c/platform/52"},"backlog in our community forum"),".\nThe Tracks API repo is currently private, but you may ask for access in the forum."),(0,o.kt)("p",null,"The Swagger API documentation is currently in flux and split across the ",(0,o.kt)("a",{parentName:"p",href:"https://api.resonate.coop/v2/docs"},"Resonate Search API")," (see the top right corner for the different services) and ",(0,o.kt)("a",{parentName:"p",href:"https://api.resonate.ninja/#/"},"Resonate Service Documentation: User"),"."),(0,o.kt)("h3",{id:"other-commands"},"Other Commands"),(0,o.kt)("h3",{id:"add-a-package"},"Add a package"),(0,o.kt)("p",null,"Installing one of the monorepo packages into one of the other ones is as easy as this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'npm install @resonate/button --workspace "beta"\n')),(0,o.kt)("p",null,"This installs ",(0,o.kt)("inlineCode",{parentName:"p"},"@resonate/button")," into the ",(0,o.kt)("inlineCode",{parentName:"p"},"beta")," package."),(0,o.kt)("h3",{id:"add-a-dev-dependency"},"Add a dev dependency"),(0,o.kt)("p",null,"Here's how you would add gulp so that it can be used in any package in this repo:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install -D gulp\n")),(0,o.kt)("h3",{id:"build"},"Build"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm run build\n")),(0,o.kt)("p",null,"To compile a specific package"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'npm run build --workspace "@resonate/rangeslider"\n')),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("p",null,"Run all tests (lint, dependency-check)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm test\n")),(0,o.kt)("p",null,"Test a specific component"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'npm run test --workspace "@resonate/player-component"\n')),(0,o.kt)("p",null,"A package can have browser tests (tape-run)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'npm run test:browser --workspace "@resonate/api-factory-generator"\n')),(0,o.kt)("h2",{id:"commands"},"Commands"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Command"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"$ npm run dev")),(0,o.kt)("td",{parentName:"tr",align:null},"Start beta app development server")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"$ npm test")),(0,o.kt)("td",{parentName:"tr",align:null},"Lint, validate deps & run dependency-check for all packages")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"$ npm run build")),(0,o.kt)("td",{parentName:"tr",align:null},"Compile all beta app files into ",(0,o.kt)("inlineCode",{parentName:"td"},"beta/dist/"))))),(0,o.kt)("h2",{id:"code-style"},"Code style"),(0,o.kt)("p",null,"We use ",(0,o.kt)("a",{parentName:"p",href:"https://eslint.org/"},"eslint")," together with the ",(0,o.kt)("a",{parentName:"p",href:"https://standardjs.com/"},"standard")," config as a linter and javascript style guide.\nMake sure to add appropriate plugin for your editor, unless it is already supported out-of-box.\nIt can also be handy to install the ",(0,o.kt)("a",{parentName:"p",href:"https://pre-commit.com/"},"pre-commit hook")," (see ",(0,o.kt)("inlineCode",{parentName:"p"},".pre-commit-config.yaml"),") to automatically apply the standard style."),(0,o.kt)("h2",{id:"maintainers"},"Maintainers"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Augustin Godiscal ",(0,o.kt)("a",{parentName:"li",href:"mailto:auggod@resonate.is"},"auggod@resonate.is")),(0,o.kt)("li",{parentName:"ul"},"Marie ",(0,o.kt)("a",{parentName:"li",href:"mailto:marie@resonate.is"},"marie@resonate.is"))),(0,o.kt)("h2",{id:"see-also"},"See Also"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/choojs/choo"},"choo")," - sturdy 4kb frontend framework"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/choojs/nanohtml"},"nanohtml")," - HTML template strings for the Browser with support for Server Side Rendering in Node.\nstrings"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/choojs/nanocomponent"},"nanocomponent")," - create performant HTML components"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/tachyons-css/tachyons"},"tachyons")," - functional CSS for\nhumans")))}m.isMDXComponent=!0}}]);